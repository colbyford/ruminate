<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Takes a large table and spreads it over smaller tables to
paginate it. It will preserve common row  information on the left and
separate columns according to maximum specifications. The final tables will
have widths less than or equal to both max_col and max_width, and heights
less than or equal to both max_row and max_height."><title>Spread Large Table Over Smaller Tables — span_table • ruminate</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Spread Large Table Over Smaller Tables — span_table"><meta property="og:description" content="Takes a large table and spreads it over smaller tables to
paginate it. It will preserve common row  information on the left and
separate columns according to maximum specifications. The final tables will
have widths less than or equal to both max_col and max_width, and heights
less than or equal to both max_row and max_height."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ruminate</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fas fa fas fa-hat-wizard"></span>
     
    Functions
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fas fa fas fa-rss"></span>
     
    News
  </a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/john-harrold/ruminate/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Spread Large Table Over Smaller Tables</h1>
      <small class="dont-index">Source: <a href="https://github.com/john-harrold/ruminate/blob/HEAD/R/NCA_Server.R" class="external-link"><code>R/NCA_Server.R</code></a></small>
      <div class="d-none name"><code>span_table.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Takes a large table and spreads it over smaller tables to
paginate it. It will preserve common row  information on the left and
separate columns according to maximum specifications. The final tables will
have widths less than or equal to both max_col and max_width, and heights
less than or equal to both max_row and max_height.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">span_table</span><span class="op">(</span></span>
<span>  table_body <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  row_common <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  table_body_head <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  row_common_head <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  header_format <span class="op">=</span> <span class="st">"text"</span>,</span>
<span>  obnd <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_row <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  max_col <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  max_height <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  max_width <span class="op">=</span> <span class="fl">6.5</span>,</span>
<span>  table_alignment <span class="op">=</span> <span class="st">"center"</span>,</span>
<span>  inner_border <span class="op">=</span> <span class="fu">officer</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/officer/reference/fp_border.html" class="external-link">fp_border</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, width <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>  outer_border <span class="op">=</span> <span class="fu">officer</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/officer/reference/fp_border.html" class="external-link">fp_border</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, width <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>  set_header_inner_border_v <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  set_header_inner_border_h <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  set_header_outer_border <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  set_body_inner_border_v <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  set_body_inner_border_h <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  set_body_outer_border <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  notes_detect <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>table_body</dt>
<dd><p>Data frame with the body of the large table.</p></dd>


<dt>row_common</dt>
<dd><p>Data frame with the common rows.</p></dd>


<dt>table_body_head</dt>
<dd><p>Data frame or matrix with headers for the table body.</p></dd>


<dt>row_common_head</dt>
<dd><p>Data frame or matrix with headers for the common rows.</p></dd>


<dt>header_format</dt>
<dd><p>Format of the header either <code>"text"</code> (default) or <code>"md"</code> for markdown.</p></dd>


<dt>obnd</dt>
<dd><p>Optional onbrand object used to format markdown. The default <code>NULL</code> value will use default formatting.</p></dd>


<dt>max_row</dt>
<dd><p>Maximum number of rows in output tables (A value of <code>NULL</code> will set max_row to the number of rows in the table).</p></dd>


<dt>max_col</dt>
<dd><p>Maximum number of columns in output tables (A value of <code>NULL</code> will set max_col to number of columns in the table).</p></dd>


<dt>max_height</dt>
<dd><p>Maximum height of the final table in inches (A value of <code>NULL</code> will use 100 inches).</p></dd>


<dt>max_width</dt>
<dd><p>Maximum width of the final table in inches (A value of <code>NULL</code> will use 100 inches).</p></dd>


<dt>table_alignment</dt>
<dd><p>Character string specifying the alignment #'of the table (body and headers). Can be <code>"center"</code> (default), <code>"left"</code>, <code>"right"</code>, or <code>"justify"</code></p></dd>


<dt>inner_border</dt>
<dd><p>Border object for inner border lines defined using <code><a href="https://davidgohel.github.io/officer/reference/fp_border.html" class="external-link">officer::fp_border()</a></code></p></dd>


<dt>outer_border</dt>
<dd><p>Border object for outer border lines defined using <code><a href="https://davidgohel.github.io/officer/reference/fp_border.html" class="external-link">officer::fp_border()</a></code></p></dd>


<dt>set_header_inner_border_v</dt>
<dd><p>Boolean value to enable or disable inner vertical borders for headers</p></dd>


<dt>set_header_inner_border_h</dt>
<dd><p>Boolean value to enable or disable inner horizontal borders for headers</p></dd>


<dt>set_header_outer_border</dt>
<dd><p>Boolean value to enable or disable outer border for headers</p></dd>


<dt>set_body_inner_border_v</dt>
<dd><p>Boolean value to enable or disable inner vertical borders for the body</p></dd>


<dt>set_body_inner_border_h</dt>
<dd><p>Boolean value to enable or disable inner horizontal borders for the body</p></dd>


<dt>set_body_outer_border</dt>
<dd><p>Boolean value to enable or disable outer border borders for the body</p></dd>


<dt>notes_detect</dt>
<dd><p>Vector of strings to detect in output tables (example <code>c("NC", "BLQ")</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>list with the following elements</p><ul><li><p>isgood:    Boolean indicating the exit status of the function.</p></li>
<li><p>one_body:  Full table with no headers.</p></li>
<li><p>one_table: Full table with headers.</p></li>
<li><p>msgs:      Vector of text messages describing any errors that were found.</p></li>
<li><p>tables:    Named list of tables. Each list element is of the output.
format from <code><a href="build_span.html">build_span()</a></code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The way the data frames relate to each other are mapped out below. The
dimensions of the different data frames are identified below (nrow x ncol)</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|-------------------------------------| ---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#|                 |                   |  ^</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#|                 |                   |  |</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| row_common_head |  table_body_head  |  | m</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#|      m x n      |       m x c       |  |</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#|                 |                   |  v</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#|-------------------------------------| ---</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">#|                 |                   |  ^</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#|                 |                   |  |</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">#|    row_common   |    table_body     |  | r</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">#|      r x n      |      r x c        |  |</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">#|                 |                   |  |</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co">#|                 |                   |  v</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">#|-------------------------------------| ---</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">#|&lt;---------------&gt;|&lt;-----------------&gt;|</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co">#        n                   c</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="build_span.html">build_span</a> for the relationship of inputs.</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://formods.ubiquity.tools/" class="external-link">formods</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org" class="external-link">readxl</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># First we need to create some data. </span></span></span>
<span class="r-in"><span><span class="co"># This will read in a test dataset:</span></span></span>
<span class="r-in"><span><span class="va">DS</span> <span class="op">=</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_excel</a></span><span class="op">(</span></span></span>
<span class="r-in"><span> path  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"formods"</span>, </span></span>
<span class="r-in"><span>                     <span class="st">"test_data"</span>, </span></span>
<span class="r-in"><span>                     <span class="st">"TEST_DATA.xlsx"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> sheet <span class="op">=</span> <span class="st">"DATA"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This will filter the dataset down and modify the formatting</span></span></span>
<span class="r-in"><span><span class="va">DS</span> <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">DS</span>, <span class="va">EVID</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span>                          <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ID</span> <span class="op">&lt;=</span> <span class="fl">30</span><span class="op">)</span>                                  <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ID</span>, <span class="va">TIME</span>, <span class="va">DV</span>, <span class="va">CMT</span><span class="op">)</span>                         <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>CMT  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="st">"CMT"</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="st">"C_ng_ml"</span>, </span></span>
<span class="r-in"><span>                             <span class="st">"Test Article"</span>, </span></span>
<span class="r-in"><span>                             <span class="va">.data</span><span class="op">[[</span><span class="st">"CMT"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>              <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ID</span>, <span class="va">TIME</span>, <span class="va">DV</span>, <span class="va">CMT</span><span class="op">)</span>                         <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>CMT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="st">"CMT"</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="st">"BM_ng_ml"</span>, </span></span>
<span class="r-in"><span>                            <span class="st">"Biomarker"</span>, </span></span>
<span class="r-in"><span>                            <span class="va">.data</span><span class="op">[[</span><span class="st">"CMT"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>               <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>Analyte <span class="op">=</span> <span class="st">"CMT"</span><span class="op">)</span>                           <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>DV <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="st">"DV"</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="fl">0</span>, <span class="st">"BQL"</span>, <span class="va">.data</span><span class="op">[[</span><span class="st">"DV"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This represents the large table we want to split up into smaller tables </span></span></span>
<span class="r-in"><span><span class="va">wide_df</span> <span class="op">=</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span><span class="va">DS</span>,</span></span>
<span class="r-in"><span>  values_from <span class="op">=</span> <span class="st">"DV"</span>,</span></span>
<span class="r-in"><span>  names_from  <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span>               <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">Analyte</span>, <span class="va">TIME</span><span class="op">)</span>     <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>TIME <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="st">"TIME"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>    </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The first two columns represent the rows</span></span></span>
<span class="r-in"><span><span class="co"># that are common across the tables:</span></span></span>
<span class="r-in"><span><span class="va">row_common</span> <span class="op">=</span> <span class="va">wide_df</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The remaining columns represent the body of the table:</span></span></span>
<span class="r-in"><span><span class="va">table_body</span> <span class="op">=</span> <span class="va">wide_df</span><span class="op">[</span>,<span class="fl">3</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">wide_df</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Next we create matrices that contain the header </span></span></span>
<span class="r-in"><span><span class="co"># information for each component above:</span></span></span>
<span class="r-in"><span><span class="va">row_common_head</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Time"</span>, <span class="st">"Analyte"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"(hr)"</span>, <span class="st">"(ng/ml)"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ncol  <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">table_body_head</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Subject ID"</span>, times<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">table_body</span><span class="op">)</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>            <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">table_body</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ncol  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">table_body</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This builds all of the tables:</span></span></span>
<span class="r-in"><span><span class="va">span_res</span> <span class="op">=</span> <span class="fu">span_table</span><span class="op">(</span>table_body      <span class="op">=</span> <span class="va">table_body</span>,</span></span>
<span class="r-in"><span>                      row_common      <span class="op">=</span> <span class="va">row_common</span>,</span></span>
<span class="r-in"><span>                      table_body_head <span class="op">=</span> <span class="va">table_body_head</span>,</span></span>
<span class="r-in"><span>                      row_common_head <span class="op">=</span> <span class="va">row_common_head</span>,</span></span>
<span class="r-in"><span>                      notes_detect    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BQL"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This will show you the first one:</span></span></span>
<span class="r-in"><span><span class="va">span_res</span><span class="op">$</span><span class="va">tables</span><span class="op">[[</span><span class="st">"Table 1"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">ft</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a flextable object.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> col_keys: `TIME`, `Analyte`, `1`, `2`, `3`, `4`, `5`, `6` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> header has 2 row(s) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> body has 20 row(s) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> original dataset sample: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   TIME   Analyte    1    2     3    4    5     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0 Biomarker 1250 1030   831 1170 1140   868</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.25 Biomarker 1255 1032 832.2 1172 1145 869.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.5 Biomarker 1259 1034 833.4 1174 1149 870.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    1 Biomarker 1269 1037 835.8 1178 1158 873.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    2 Biomarker 1287 1045 840.5 1186 1176 879.4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This will build a single table with the rows and </span></span></span>
<span class="r-in"><span><span class="co"># column ranges specified</span></span></span>
<span class="r-in"><span><span class="va">bs_res</span> <span class="op">=</span>   <span class="fu"><a href="build_span.html">build_span</a></span><span class="op">(</span>table_body      <span class="op">=</span> <span class="va">table_body</span>,</span></span>
<span class="r-in"><span>                      row_common      <span class="op">=</span> <span class="va">row_common</span>,</span></span>
<span class="r-in"><span>                      table_body_head <span class="op">=</span> <span class="va">table_body_head</span>,</span></span>
<span class="r-in"><span>                      row_common_head <span class="op">=</span> <span class="va">row_common_head</span>,</span></span>
<span class="r-in"><span>                      col_sel         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      row_sel         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      notes_detect    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BQL"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This will show you the result:</span></span></span>
<span class="r-in"><span><span class="va">bs_res</span><span class="op">$</span><span class="va">ft</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a flextable object.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> col_keys: `TIME`, `Analyte`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, `8`, `9`, `10` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> header has 2 row(s) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> body has 10 row(s) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> original dataset sample: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   TIME   Analyte    1    2     3    4    5     6   7    8    9    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0 Biomarker 1250 1030   831 1170 1140   868 643 1050 1130   744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.25 Biomarker 1255 1032 832.2 1172 1145 869.4 644 1051 1134 745.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.5 Biomarker 1259 1034 833.4 1174 1149 870.9 645 1052 1138 747.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    1 Biomarker 1269 1037 835.8 1178 1158 873.7 647 1055 1146 751.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    2 Biomarker 1287 1045 840.5 1186 1176 879.4 651 1059 1162 759.2</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by John Harrold.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

